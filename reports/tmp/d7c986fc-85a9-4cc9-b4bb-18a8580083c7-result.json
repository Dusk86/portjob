{"name": "获取token值", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <test_case.testrequest.TestSendRequest object at 0x000001AE1C13AFB0>\ncasein = {'name': '获取token', 'request': {'data': {'appid': 'wx6b11b3efd1cdc290', 'grant_type': 'client_credential', 'secret': '...f9529d'}, 'method': 'get', 'url': 'https://api.weixin.qq.com/cgi-bin/token'}, 'validate': {'eq': {'expires_in': 7200}}}\n\n    @pytest.mark.parametrize(\"casein\", YamlUtil().read_testcase('E:/LoginTest/data/get_token.yml', 'gettoken'))\n    # @allure.story(\"\") 子功能名称，放在用例前面。 三级目录\n    @allure.story(\"获取token\")\n    @allure.title(\"获取token值\")\n    @allure.description(\"用来描述test_gettoken这条case\")\n    @allure.step(\"测试步骤，在函数外部使用\")\n    def test_gettoken(self, casein):\n        # with allure.step(\"获取路径\"):  测试过程中的每个步骤,可以放在测试用例方法里面。在函数内部使用\n        with allure.step(\"请求地址：{}\".format(casein['request']['url'])):\n            url = casein['request']['url']\n            logger.debug(f\"请求地址=====》{url}\")\n        with allure.step(\"请求方式：{}\".format(casein['request']['method'])):\n            method = casein['request']['method']\n            logger.debug(f\"请求方式=====》{method}\")\n        # data 里面是参数，字典类型，键值对\n        with allure.step(\"获取具体数据：{}\".format(casein['request']['data'])):\n            data = casein['request']['data']\n            logger.debug(f\"请求参数=====》{data}\")\n        with allure.step(\"返回的token值：{}\".format(RequestUtil().request(url, method, data).json()['access_token'])):\n            # 请求返回的断言\n            assert_info = RequestUtil().request(url, method, data).json()['expires_in']\n            token = RequestUtil().request(url, method, data).json()['access_token']\n            logger.debug(f\"返回token值=====》{token}\")\n        # 期望的断言\n        assert_expected =casein['validate']['eq']['expires_in']\n        # # 断言判断\n>       Assertutil().assert_in_body(assert_info, assert_expected)\n\ntest_case\\testrequest.py:56: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <common.assert_util.Assertutil object at 0x000001AE1C347FD0>\nbody = '7199', expected_body = '7200'\n\n    def assert_in_body(self, body, expected_body):\n        try:\n            body = json.dumps(body)\n            expected_body = json.dumps(expected_body)\n            print(body)\n>           assert expected_body in body\nE           AssertionError\n\ncommon\\assert_util.py:35: AssertionError"}, "description": "用来描述test_gettoken这条case", "steps": [{"name": "测试步骤，在函数外部使用", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\python\\lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"E:\\LoginTest\\test_case\\testrequest.py\", line 56, in test_gettoken\n    Assertutil().assert_in_body(assert_info, assert_expected)\n  File \"E:\\LoginTest\\common\\assert_util.py\", line 35, in assert_in_body\n    assert expected_body in body\n"}, "steps": [{"name": "请求地址：https://api.weixin.qq.com/cgi-bin/token", "status": "passed", "start": 1702358250009, "stop": 1702358250009}, {"name": "请求方式：get", "status": "passed", "start": 1702358250009, "stop": 1702358250010}, {"name": "获取具体数据：{'grant_type': 'client_credential', 'appid': 'wx6b11b3efd1cdc290', 'secret': '106a9c6157c4db5f6029918738f9529d'}", "status": "passed", "start": 1702358250010, "stop": 1702358250010}, {"name": "返回的token值：75_ydKdJTqhkYHeAnBSN1saTK26sQficbVgeXkxc4LI4gzUAFaRGUK08shdxsnz0GMgIwkWBOWX7SNtTJ-I_v2Z0MsljHbu4tsJXVhnVPUBUUW8uwsTq-qrMjCHOpcGDDhAJAWTT", "status": "passed", "start": 1702358251319, "stop": 1702358253378}], "parameters": [{"name": "casein", "value": "{'name': '获取token', 'request': {'method': 'get', 'url': 'https://api.weixin.qq.com/cgi-bin/token', 'data': {'grant_type': 'client_credential', 'appid': 'wx6b11b3efd1cdc290', 'secret': '106a9c6157c4db5f6029918738f9529d'}}, 'validate': {'eq': {'expires_in': 7200}}}"}], "start": 1702358250009, "stop": 1702358253378}], "attachments": [{"name": "log", "source": "4a13da26-44ed-4624-8e68-19ac3efddb1c-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "casein", "value": "{'name': '获取token', 'request': {'method': 'get', 'url': 'https://api.weixin.qq.com/cgi-bin/token', 'data': {'grant_type': 'client_credential', 'appid': 'wx6b11b3efd1cdc290', 'secret': '106a9c6157c4db5f6029918738f9529d'}}, 'validate': {'eq': {'expires_in': 7200}}}"}], "start": 1702358250009, "stop": 1702358253409, "uuid": "a3ce1500-c720-4f2d-ab6a-239c2f93e9f3", "historyId": "881b80c0e9dfa9f4cc80ccb30937916f", "testCaseId": "ec5db92b947c639b868aba9d098378b5", "fullName": "test_case.testrequest.TestSendRequest#test_gettoken", "labels": [{"name": "story", "value": "获取token"}, {"name": "feature", "value": "接口测试用例"}, {"name": "parentSuite", "value": "test_case"}, {"name": "suite", "value": "testrequest"}, {"name": "subSuite", "value": "TestSendRequest"}, {"name": "host", "value": "changgp"}, {"name": "thread", "value": "9636-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_case.testrequest"}], "links": [{"type": "链接地址"}, {"type": "issue", "name": "bug地址"}, {"type": "test_case", "url": "LoginTest/test_case/testrequest.py", "name": "测试用例地址"}]}